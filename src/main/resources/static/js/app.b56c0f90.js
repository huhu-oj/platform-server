(function(){var e={9895:function(e,t,l){"use strict";l.d(t,{C5:function(){return a},Cq:function(){return s},kS:function(){return r},vG:function(){return i},x4:function(){return n}});var o=l(4471);function n(e){return(0,o.Z)({url:"/auth/login",method:"post",data:e})}function s(){return(0,o.Z)({url:"auth/code",method:"get"})}function a(){return(0,o.Z)({url:"/api/user",method:"get"})}function r(){return(0,o.Z)({url:"/auth/logout",method:"delete"})}function i(){return(0,o.Z)({url:"auth/addr",method:"get"})}},5814:function(e,t,l){"use strict";var o=l(9242),n=l(3396);function s(e,t){const l=(0,n.up)("router-view");return(0,n.wg)(),(0,n.j4)(l)}var a=l(89);const r={},i=(0,a.Z)(r,[["render",s]]);var u=i,d=l(5722),m=l(5842),c=l(1713);l(4415),l(2469);(0,o.ri)(u).use(m.Z).use(d.Z).use(c.Z).mount("#app")},5722:function(e,t,l){"use strict";l.d(t,{Z:function(){return zl}});var o=l(2483),n=l(3396),s=l(7139);const a=(0,n._)("div",{style:{display:"flex","flex-grow":"1"}},null,-1),r=(0,n._)("div",{style:{display:"flex","flex-grow":"1"}},null,-1),i={class:"user-info"},u=["innerHTML"],d={key:0};function m(e,t,l,o,m,c){const p=(0,n.up)("navbar"),h=(0,n.up)("el-header"),f=(0,n.up)("el-image"),w=(0,n.up)("el-divider"),g=(0,n.up)("user-menu"),b=(0,n.up)("el-aside"),y=(0,n.up)("router-view"),v=(0,n.up)("el-main"),k=(0,n.up)("el-container"),x=(0,n.up)("el-col"),W=(0,n.up)("el-row"),_=(0,n.up)("el-footer");return(0,n.wg)(),(0,n.j4)(k,null,{default:(0,n.w5)((()=>[(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{left:(0,n.w5)((()=>[a])),right:(0,n.w5)((()=>[r])),_:1})])),_:1}),(0,n.Wm)(W,{justify:"center",style:{"margin-top":"20px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(x,{span:18},{default:(0,n.w5)((()=>[(0,n.Wm)(k,null,{default:(0,n.w5)((()=>[(0,n.Wm)(b,{width:"20%"},{default:(0,n.w5)((()=>[(0,n._)("div",i,[(0,n.Wm)(f,{style:{width:"100px",height:"100px"},src:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg",fit:"fill"},null,8,["src"]),(0,n._)("div",null,(0,s.zw)(e.user.dept.name),1),(0,n._)("div",null,(0,s.zw)(e.user.nickName),1)]),(0,n.Wm)(w),(0,n.Wm)(g)])),_:1}),(0,n.Wm)(v,null,{default:(0,n.w5)((()=>[(0,n.Wm)(y)])),_:1})])),_:1})])),_:1})])),_:1}),e.$store.state.settings.showFooter?((0,n.wg)(),(0,n.j4)(_,{key:0,class:"user-footer"},{default:(0,n.w5)((()=>[(0,n._)("span",{innerHTML:e.$store.state.settings.footerTxt},null,8,u),e.$store.state.settings.caseNumber?((0,n.wg)(),(0,n.iD)("span",d," ⋅ ")):(0,n.kq)("",!0)])),_:1})):(0,n.kq)("",!0)])),_:1})}const c=(0,n._)("span",null,"做题分析",-1),p=(0,n._)("span",null,"学生做题分析",-1),h=(0,n._)("span",null,"我的测验",-1),f=(0,n._)("span",null,"我的题解",-1),w=(0,n._)("span",null,"个人生涯",-1),g=(0,n._)("span",null,"测验分析",-1);function b(e,t,l,o,s,a){const r=(0,n.up)("el-menu-item"),i=(0,n.up)("el-menu");return(0,n.wg)(),(0,n.j4)(i,{router:""},{default:(0,n.w5)((()=>[(0,n.WI)(e.$slots,"head"),-1!==e.userRoles.indexOf("学生")?((0,n.wg)(),(0,n.j4)(r,{key:0,index:"/answer"},{default:(0,n.w5)((()=>[c])),_:1})):(0,n.kq)("",!0),-1!==e.userRoles.indexOf("老师")?((0,n.wg)(),(0,n.j4)(r,{key:1,index:"/teacher/student-analysis"},{default:(0,n.w5)((()=>[p])),_:1})):(0,n.kq)("",!0),(0,n.Wm)(r,{index:"/my-test"},{default:(0,n.w5)((()=>[h])),_:1}),(0,n.Wm)(r,{index:"/my-solutions"},{default:(0,n.w5)((()=>[f])),_:1}),-1!==e.userRoles.indexOf("学生")?((0,n.wg)(),(0,n.j4)(r,{key:2,index:"/student/career"},{default:(0,n.w5)((()=>[w])),_:1})):(0,n.kq)("",!0),-1!==e.userRoles.indexOf("老师")?((0,n.wg)(),(0,n.j4)(r,{key:3,index:"/teacher/test-analysis"},{default:(0,n.w5)((()=>[g])),_:1})):(0,n.kq)("",!0),(0,n.WI)(e.$slots,"tail")])),_:3})}var y=l(65),v={computed:{...(0,y.Se)(["userRoles"])}},k=l(89);const x=(0,k.Z)(v,[["render",b]]);var W=x;const _={class:"flex-grow6"};function C(e,t,l,o,s,a){const r=(0,n.up)("el-link"),i=(0,n.up)("el-menu-item"),u=(0,n.up)("el-avatar"),d=(0,n.up)("el-divider"),m=(0,n.up)("user-menu"),c=(0,n.up)("el-sub-menu"),p=(0,n.up)("el-menu");return(0,n.wg)(),(0,n.j4)(p,{mode:"horizontal",ellipsis:!1},{default:(0,n.w5)((()=>[(0,n.WI)(e.$slots,"left",{},void 0,!0),(0,n.Wm)(r,{class:"vcenter logo",type:"plain",underline:!1,href:"/"},{default:(0,n.w5)((()=>[(0,n.Uk)("huhuOJ平台")])),_:1}),(0,n._)("div",_,[(0,n.WI)(e.$slots,"center",{},void 0,!0)]),(0,n.Wm)(i,null,{default:(0,n.w5)((()=>[(0,n.Uk)("通知")])),_:1}),(0,n.Wm)(c,null,{title:(0,n.w5)((()=>[(0,n.Wm)(u,{src:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg"},null,8,["src"])])),default:(0,n.w5)((()=>[(0,n.Wm)(m,null,{tail:(0,n.w5)((()=>[(0,n.Wm)(d),(0,n.Wm)(i,{index:"",onClick:a.open},{default:(0,n.w5)((()=>[(0,n.Uk)("退出登录")])),_:1},8,["onClick"])])),_:1})])),_:1}),(0,n.WI)(e.$slots,"right",{},void 0,!0)])),_:3})}var S=l(2655),R={components:{userMenu:W},computed:{...(0,y.Se)(["user"])},methods:{getUserInfo(){},open(){S.T.confirm("确定注销并退出系统吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.logout()}))},logout(){this.$store.dispatch("LogOut").then((()=>{location.reload()}))}}};const V=(0,k.Z)(R,[["render",C],["__scopeId","data-v-101d024b"]]);var T=V,P=l(3126),U=l.n(P),I={name:"HomeView",components:{navbar:T,userMenu:W},computed:{...(0,y.Se)(["user"])},methods:{getUser(){}}};const j=(0,k.Z)(I,[["render",m]]);var D=j;l(7658);const L={style:{display:"flex"}};function E(e,t,l,o,s,a){const r=(0,n.up)("el-option"),i=(0,n.up)("el-select"),u=(0,n.up)("el-input"),d=(0,n.up)("el-table-column"),m=(0,n.up)("el-button"),c=(0,n.up)("el-table"),p=(0,n.up)("el-col"),h=(0,n.up)("v-chart"),f=(0,n.up)("el-row"),w=(0,n.up)("el-card");return(0,n.wg)(),(0,n.j4)(w,null,{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p,{span:18},{default:(0,n.w5)((()=>[(0,n._)("div",L,[(0,n.Wm)(i,{modelValue:s.labelIds,"onUpdate:modelValue":t[0]||(t[0]=e=>s.labelIds=e),onChange:a.search,multiple:""},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.labelList,(e=>((0,n.wg)(),(0,n.j4)(r,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),(0,n.Wm)(u)]),(0,n.Wm)(c,{data:s.answerRecords},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{prop:"problem.title",label:"所属题目"}),(0,n.Wm)(d,{prop:"submitCount",type:"expand"},{default:(0,n.w5)((t=>[(0,n.Wm)(c,{data:t.row.records},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{prop:"executeResult.name",label:"状态"}),(0,n.Wm)(d,{prop:"createTime",label:"创建时间"}),(0,n.Wm)(d,{prop:"language.name",label:"语言"}),(0,n.Wm)(d,{label:"操作"},{default:(0,n.w5)((t=>[(0,n.Wm)(m,{type:"text",onClick:l=>e.$router.push(`/answer_record_detail/${t.row.id}`)},{default:(0,n.w5)((()=>[(0,n.Uk)("查看详情")])),_:2},1032,["onClick"])])),_:1})])),_:2},1032,["data"])])),_:1})])),_:1},8,["data"])])),_:1}),(0,n.Wm)(p,{span:6},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{option:s.answerRecordStat,class:"chart",autoresize:""},null,8,["option"])])),_:1})])),_:1})])),_:1})}var Z=l(4592),O=(l(3458),l(2325)),A=l(4471);function H(){return(0,A.Z)({url:"/api/label",method:"get"})}function q(e,t,l){return(0,A.Z)({url:"/api/answerRecord",method:"get",params:{problemId:e,answerRecordId:t,testId:l}})}function M(e,t,l,o){let n=new URLSearchParams;return e&&n.append("problemId",e),t&&n.append("answerRecordId",t),l&&n.append("testId",l),o&&n.append("labelIds",o),(0,A.Z)({url:"/api/answerRecord/all",method:"get",params:n})}function N(e){return(0,A.Z)({url:"/api/answerRecord",method:"put",data:e})}var z={name:"AnswerRecord",components:{VChart:Z.ZP},data(){return{labelIds:[],labelList:[],answerRecords:[],answerRecordStat:{tooltip:{trigger:"item",formatter:e=>{const t=e.data;return`${e.seriesName}<br/>${t.name} : ${t.value} (${e.percent}%)`}},legend:{orient:"vertical",left:"left"},dataset:[{source:[]},{source:[]},{source:[]},{source:[]}],series:[{datasetIndex:0,name:"标签",type:"pie",radius:["75%","95%"],labelLine:{show:!1},label:{show:!1}},{datasetIndex:1,name:"语言",type:"pie",radius:["50%","74%"],labelLine:{show:!1},label:{show:!1}},{datasetIndex:2,name:"判题结果",type:"pie",radius:["25%","49%"],labelLine:{show:!1},label:{show:!1}},{datasetIndex:3,name:"题目",type:"pie",radius:[0,"24%"],labelLine:{show:!1},label:{show:!1}}]}}},methods:{search(){this.getAnswerRecords(null,null,null,this.labelIds)},getLabelList(){H().then((e=>{this.labelList=e}))},getAnswerRecords(e,t,l,o){M(e,t,l,o).then((e=>{let t=e,l=[],o=(0,O.on)(t.map((e=>e.problem)),"id");o.forEach((e=>{let o=t.filter((t=>t.problem.id===e.id));l.push({problem:e,records:o})})),this.answerRecords=l;const n=(0,O.on)(t.filter((e=>1===e.executeResult.id)).map((e=>e.problem)),"id").length,s=(0,O.on)(t.map((e=>e.problem)),"id").length-n,a=[{name:"已通过",value:n},{name:"未通过",value:s}],r=[],i=t.groupBy((e=>e.language.name));for(let h in i)r.push({name:h,value:i[h].length});const u=[];let d=[];t.map((e=>e.problem.labels)).map((e=>d=d.concat(e)));const m=d.groupBy((e=>e.name));for(let h in m)u.push({name:h,value:m[h].length});const c=[],p=t.groupBy((e=>e.executeResult.name));for(let h in p)c.push({name:h,value:p[h].length});this.answerRecordStat.dataset[0].source=u,this.answerRecordStat.dataset[1].source=r,this.answerRecordStat.dataset[2].source=c,this.answerRecordStat.dataset[3].source=a}))}},mounted(){},created(){this.getLabelList(),this.getAnswerRecords()}};const F=(0,k.Z)(z,[["render",E],["__scopeId","data-v-67b1980b"]]);var Y=F,B=l(9242);const J=e=>((0,n.dD)("data-v-3e0dc494"),e=e(),(0,n.Cn)(),e),K={slot:"footer",class:"dialog-footer"},Q={key:1},G=J((()=>(0,n._)("div",{style:{"flex-grow":"1"}},null,-1))),X={key:1},$=J((()=>(0,n._)("span",{style:{height:"200px",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},"暂无测验",-1))),ee=[$];function te(e,t,l,o,a,r){const i=(0,n.up)("el-input"),u=(0,n.up)("el-form-item"),d=(0,n.up)("el-option"),m=(0,n.up)("el-select"),c=(0,n.up)("el-date-picker"),p=(0,n.up)("el-tree"),h=(0,n.up)("el-form"),f=(0,n.up)("el-button"),w=(0,n.up)("el-dialog"),g=(0,n.up)("el-header"),b=(0,n.up)("el-table-column"),y=(0,n.up)("el-tag"),v=(0,n.up)("el-popconfirm"),k=(0,n.up)("el-table"),x=(0,n.up)("el-link"),W=(0,n.up)("el-col"),_=(0,n.up)("el-row"),C=(0,n.up)("el-card"),S=(0,n.up)("el-main"),R=(0,n.up)("el-container");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(w,{"close-on-click-modal":!1,modelValue:a.formVisible,"onUpdate:modelValue":t[7]||(t[7]=e=>a.formVisible=e),title:a.formTitle,width:"500px"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{ref:"form",model:a.form,rules:a.rules,size:"small","label-width":"80px"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{label:"标题",prop:"title"},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{modelValue:a.form.title,"onUpdate:modelValue":t[0]||(t[0]=e=>a.form.title=e),style:{width:"370px"}},null,8,["modelValue"])])),_:1}),(0,n.Wm)(u,{label:"备注",prop:"description"},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{modelValue:a.form.description,"onUpdate:modelValue":t[1]||(t[1]=e=>a.form.description=e),rows:3,type:"textarea",style:{width:"370px"}},null,8,["modelValue"])])),_:1}),(0,n.Wm)(u,{label:"试卷",prop:"examinationPaper"},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{modelValue:a.form.examinationPaper,"onUpdate:modelValue":t[2]||(t[2]=e=>a.form.examinationPaper=e),"value-key":"id",filterable:"",placeholder:"Select"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.examinationPaperList,(e=>((0,n.wg)(),(0,n.j4)(d,{key:e.id,label:e.name,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,n.Wm)(u,{label:"开始时间",prop:"startTime"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{modelValue:a.form.startTime,"onUpdate:modelValue":t[3]||(t[3]=e=>a.form.startTime=e),"value-format":"YYYY-MM-DD HH:mm:ss",type:"datetime",style:{width:"370px"}},null,8,["modelValue"])])),_:1}),(0,n.Wm)(u,{label:"结束时间",prop:"endTime"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{modelValue:a.form.endTime,"onUpdate:modelValue":t[4]||(t[4]=e=>a.form.endTime=e),"value-format":"YYYY-MM-DD HH:mm:ss",type:"datetime",style:{width:"370px"}},null,8,["modelValue"])])),_:1}),"新增"===a.formTitle?((0,n.wg)(),(0,n.j4)(u,{key:0,label:"关联单位",prop:"depts"},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{ref:"deptTree",data:a.deptDatas,load:r.getDeptDatas,props:a.defaultProps,"expand-on-click-node":!1,modelValue:a.form.depts,"onUpdate:modelValue":t[5]||(t[5]=e=>a.form.depts=e),lazy:"","show-checkbox":"",onCheckChange:r.handleDeptChange},null,8,["data","load","props","modelValue","onCheckChange"])])),_:1})):(0,n.kq)("",!0)])),_:1},8,["model","rules"]),(0,n._)("div",K,[(0,n.Wm)(f,{type:"text",onClick:t[6]||(t[6]=e=>a.formVisible=!1)},{default:(0,n.w5)((()=>[(0,n.Uk)("取消")])),_:1}),(0,n.Wm)(f,{type:"primary",onClick:r.submitCU},{default:(0,n.w5)((()=>[(0,n.Uk)("确认")])),_:1},8,["onClick"])])])),_:1},8,["modelValue","title"]),(0,n.Wm)(R,null,{default:(0,n.w5)((()=>[-1!==e.userRoles.indexOf("老师")?((0,n.wg)(),(0,n.j4)(g,{key:0},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{onClick:r.addTest},{default:(0,n.w5)((()=>[(0,n.Uk)("添加")])),_:1},8,["onClick"])])),_:1})):(0,n.kq)("",!0),-1!==e.userRoles.indexOf("学生")?((0,n.wg)(),(0,n.j4)(g,{key:1},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{modelValue:a.testStatus,"onUpdate:modelValue":t[8]||(t[8]=e=>a.testStatus=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{label:"未开始",value:-1}),(0,n.Wm)(d,{label:"进行中",value:0}),(0,n.Wm)(d,{label:"已结束",value:1})])),_:1},8,["modelValue"])])),_:1})):(0,n.kq)("",!0),(0,n.Wm)(S,null,{default:(0,n.w5)((()=>[-1!==e.userRoles.indexOf("老师")?((0,n.wg)(),(0,n.j4)(k,{key:0,data:a.tests,onRowClick:r.toTestAnalysis},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{prop:"title",label:"测验名称"}),(0,n.Wm)(b,{prop:"examinationPaper.name",label:"使用试卷"}),(0,n.Wm)(b,{prop:"startTime",label:"开始时间"}),(0,n.Wm)(b,{prop:"endTime",label:"结束时间"}),(0,n.Wm)(b,{prop:"enabled",label:"状态"},{default:(0,n.w5)((e=>[-1===r.checkTestStatus(e.row)?((0,n.wg)(),(0,n.j4)(y,{key:0,type:"success"},{default:(0,n.w5)((()=>[(0,n.Uk)("未开始")])),_:1})):(0,n.kq)("",!0),0===r.checkTestStatus(e.row)?((0,n.wg)(),(0,n.j4)(y,{key:1},{default:(0,n.w5)((()=>[(0,n.Uk)("进行中")])),_:1})):(0,n.kq)("",!0),1===r.checkTestStatus(e.row)?((0,n.wg)(),(0,n.j4)(y,{key:2,type:"info"},{default:(0,n.w5)((()=>[(0,n.Uk)("已结束")])),_:1})):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(b,{label:"操作"},{default:(0,n.w5)((e=>[(0,n.Wm)(f,{size:"small",disabled:-1!==r.checkTestStatus(e.row),onClick:(0,B.iM)((t=>r.updateTest(e.row)),["stop"])},{default:(0,n.w5)((()=>[(0,n.Uk)("修改")])),_:2},1032,["disabled","onClick"]),(0,n.Wm)(v,{title:"确认删除",onConfirm:t=>r.delTest(e.row)},{reference:(0,n.w5)((()=>[-1===r.checkTestStatus(e.row)?((0,n.wg)(),(0,n.j4)(f,{key:0,size:"small",type:"danger"},{default:(0,n.w5)((()=>[(0,n.Uk)("删除")])),_:1})):(0,n.kq)("",!0),1===r.checkTestStatus(e.row)?((0,n.wg)(),(0,n.j4)(f,{key:1,disabled:1===r.checkTestStatus(e.row),size:"small",type:"danger"},{default:(0,n.w5)((()=>[(0,n.Uk)("删除")])),_:2},1032,["disabled"])):(0,n.kq)("",!0)])),_:2},1032,["onConfirm"]),(0,n.Wm)(v,{title:"确认结束当前测验",onConfirm:(0,B.iM)((t=>r.endTest(e.row)),["stop"])},{reference:(0,n.w5)((()=>[0===r.checkTestStatus(e.row)?((0,n.wg)(),(0,n.j4)(f,{key:0,size:"small",type:"danger"},{default:(0,n.w5)((()=>[(0,n.Uk)("结束")])),_:1})):(0,n.kq)("",!0)])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data","onRowClick"])):(0,n.kq)("",!0),-1!==e.userRoles.indexOf("学生")?((0,n.wg)(),(0,n.iD)("div",Q,[0!==a.tests.length?((0,n.wg)(!0),(0,n.iD)(n.HY,{key:0},(0,n.Ko)(a.tests,(e=>((0,n.wg)(),(0,n.iD)("div",null,[(0,n.wy)((0,n.Wm)(C,{class:"test"},{default:(0,n.w5)((()=>[(0,n.Wm)(_,null,{default:(0,n.w5)((()=>[(0,n.Wm)(x,{class:"title",onClick:t=>r.toExaminationPaper(e.id)},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(e.title),1)])),_:2},1032,["onClick"]),(0,n.Wm)(W,{style:{display:"flex"}},{default:(0,n.w5)((()=>[-1===r.checkTestStatus(e)?((0,n.wg)(),(0,n.j4)(y,{key:0,type:"success"},{default:(0,n.w5)((()=>[(0,n.Uk)("未开始")])),_:1})):(0,n.kq)("",!0),0===r.checkTestStatus(e)?((0,n.wg)(),(0,n.j4)(y,{key:1},{default:(0,n.w5)((()=>[(0,n.Uk)("进行中")])),_:1})):(0,n.kq)("",!0),1===r.checkTestStatus(e)?((0,n.wg)(),(0,n.j4)(y,{key:2,type:"info"},{default:(0,n.w5)((()=>[(0,n.Uk)("已结束")])),_:1})):(0,n.kq)("",!0),G,r.showTestDetail(e.id)?((0,n.wg)(),(0,n.j4)(x,{key:3,href:`/test_result/${e.id}`},{default:(0,n.w5)((()=>[(0,n.Uk)("详情统计")])),_:2},1032,["href"])):(0,n.kq)("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1536),[[B.F8,r.checkTestStatus(e)===a.testStatus]])])))),256)):((0,n.wg)(),(0,n.iD)("div",X,ee))])):(0,n.kq)("",!0)])),_:1})])),_:1})],64)}function le(e){return(0,A.Z)({url:"/api/test",method:"get",params:{testId:e}})}function oe(e){return(0,A.Z)({url:"/api/test/teacher",method:"get",params:{testId:e}})}function ne(e){return(0,A.Z)({url:"/api/test/record/student",method:"get",params:{studentId:e}})}function se(e){return(0,A.Z)({url:"/api/test",method:"post",data:e})}function ae(e){return(0,A.Z)({url:"/api/test/record",method:"post",data:e})}function re(e){return(0,A.Z)({url:"/api/test/record",method:"get",params:{testId:e}})}function ie(){return(0,A.Z)({url:"/api/test/records",method:"get"})}function ue(e){return(0,A.Z)({url:"/api/test",method:"put",data:e})}function de(e){return(0,A.Z)({url:"/api/test",method:"delete",params:{testId:e}})}function me(e){return(0,A.Z)({url:"api/dept",method:"get",params:e})}function ce(e){return(0,A.Z)({url:"/api/examinationPaper",method:"get",params:{id:e}})}var pe=l(6666),he={name:"MyTest",computed:{...(0,y.Se)(["roles","userRoles"])},data(){return{manager:!1,tests:[],testStatus:0,testDetails:[],formVisible:!1,formTitle:"新增",form:{id:null,title:null,description:null,examinationPaper:null,startTime:(0,O.TD)(new Date,null),endTime:null,enabled:!0,depts:[]},rules:{title:[{required:!0,message:"标题不能为空",trigger:"blur"}],examinationPaper:[{required:!0,message:"试卷不能为空",trigger:"blur"}],startTime:[{required:!0,message:"开始时间不能为空",trigger:"blur"}],endTime:[{required:!0,message:"结束时间不能为空",trigger:"blur"}],depts:[{required:!0,message:"至少关联一个单位",trigger:"blur"}]},examinationPaperList:[],deptDatas:[],defaultProps:{children:"children",label:"name",isLeaf:"leaf"}}},methods:{checkTestStatus(e){return(0,O.W5)(e)},showTestDetail(e){return 0!==this.testDetails.length&&this.testDetails.some((t=>t.testId===e))},toTestAnalysis(e){this.$router.push(`/teacher/test-analysis/${e.id}`)},toExaminationPaper(e){this.$router.push({path:`/exam/${e}`})},getMyTests(){-1!==this.userRoles.indexOf("老师")&&oe().then((e=>{this.tests=e.content})),-1!==this.userRoles.indexOf("学生")&&(console.log(this.userRoles),le().then((e=>{this.tests=e.content})))},getMyRecords(){ie().then((e=>{this.testDetails=e}))},addTest(){this.formTitle="新增",this.form={id:null,title:null,description:null,examinationPaper:null,startTime:Date.now(),endTime:null,enabled:!0,depts:[]},this.formVisible=!0},updateTest(e){this.formTitle="修改",this.formVisible=!0,this.form=e},delTest(e){de(e.id).then((e=>{pe.bM.success({title:"删除测验成功"}),this.getMyTests()}))},endTest(e){e.enabled=!1,ue(e).then((e=>{pe.bM.success("已结束当前测验"),this.getMyTests()}))},getDeptDatas(e,t){const l="id,desc",o={sort:l};"object"!==typeof e?e&&(o["name"]=e):0!==e.level&&(o["pid"]=e.data.id),setTimeout((()=>{me(o).then((e=>{t?t(e.content):this.deptDatas=e.content}))}),100)},handleDeptChange(){this.form.depts=this.$refs.deptTree.getCheckedNodes(),console.log(this.form.depts)},submitCU(){"新增"===this.formTitle?se(this.form).then((e=>{this.formVisible=!1,pe.bM.success({title:"新增测验成功"}),this.getMyTests()})):ue(this.form).then((e=>{this.formVisible=!1,pe.bM.success({title:"修改测验成功"}),this.getMyTests()}))},getExaminationPapers(){ce().then((e=>{this.examinationPaperList=e.content}))},changeEnabled(e,t,l){this.$confirm('此操作将 "'+l+'" '+e.title+", 是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{ue(e).then((e=>{this.$notify({title:l+"成功"})})).catch((()=>{e.enabled=!e.enabled}))})).catch((()=>{e.enabled=!e.enabled}))}},mounted(){this.getMyTests(),this.getMyRecords(),this.getExaminationPapers()}};const fe=(0,k.Z)(he,[["render",te],["__scopeId","data-v-3e0dc494"]]);var we=fe;const ge=(0,n._)("div",{style:{display:"flex","flex-grow":"1"}},null,-1),be=(0,n._)("div",{style:{display:"flex","flex-grow":"1"}},null,-1),ye={style:{"margin-bottom":"20px"}},ve=["onDblclick"],ke={style:{display:"flex"}},xe=(0,n._)("div",{style:{display:"flex","flex-grow":"1"}},null,-1),We={style:{position:"relative",height:"45px"}},_e={key:0},Ce={key:1},Se={key:2,class:"vcenter",style:{"text-align":"center"}},Re={style:{display:"flex"}},Ve=(0,n._)("div",{style:{display:"flex","flex-grow":"1"}},null,-1),Te=(0,n._)("div",{style:{display:"flex","flex-grow":"5"}},null,-1),Pe=(0,n._)("div",{style:{display:"flex","flex-grow":"1"}},null,-1),Ue=(0,n._)("div",{style:{display:"flex","flex-grow":"1"}},null,-1);function Ie(e,t,l,o,a,r){const i=(0,n.up)("el-countdown"),u=(0,n.up)("navbar"),d=(0,n.up)("el-header"),m=(0,n.up)("el-tag"),c=(0,n.up)("el-space"),p=(0,n.up)("el-divider"),h=(0,n.up)("mavon-editor"),f=(0,n.up)("el-collapse-item"),w=(0,n.up)("el-collapse"),g=(0,n.up)("el-scrollbar"),b=(0,n.up)("el-tab-pane"),y=(0,n.up)("solution"),v=(0,n.up)("Plus"),k=(0,n.up)("el-button"),x=(0,n.up)("el-table-column"),W=(0,n.up)("el-link"),_=(0,n.up)("el-input"),C=(0,n.up)("el-table"),S=(0,n.up)("el-tabs"),R=(0,n.up)("el-col"),V=(0,n.up)("el-option"),T=(0,n.up)("el-select"),P=(0,n.up)("codemirror"),U=(0,n.up)("solution-detail"),I=(0,n.up)("el-form-item"),j=(0,n.up)("el-form"),D=(0,n.up)("el-row"),L=(0,n.up)("el-main"),E=(0,n.up)("el-button-group"),Z=(0,n.up)("el-footer"),O=(0,n.up)("el-container"),A=(0,n.up)("el-drawer");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(O,{class:"container"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,null,(0,n.Nv)({_:2},[0===r.testStatus?{name:"center",fn:(0,n.w5)((()=>[ge,(0,n.Wm)(i,{title:"离测验结束还有",value:r.testCountdown,onFinish:r.submitTest},null,8,["value","onFinish"]),be])),key:"0"}:void 0]),1024)])),_:1}),(0,n.Wm)(L,null,{default:(0,n.w5)((()=>[(0,n.Wm)(D,{gutter:20},{default:(0,n.w5)((()=>[(0,n.Wm)(R,{span:12},{default:(0,n.w5)((()=>[(0,n.Wm)(S,{type:"border-card",modelValue:a.leftTab,"onUpdate:modelValue":t[3]||(t[3]=e=>a.leftTab=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{label:"题目描述",style:{height:"calc(100vh - 231px)"}},{default:(0,n.w5)((()=>[(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n._)("div",ye,(0,s.zw)(a.problem.title),1),(0,n.Wm)(c,{wrap:""},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.problem.labels,(e=>((0,n.wg)(),(0,n.j4)(m,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(e.name),1)])),_:2},1024)))),256))])),_:1}),(0,n.Wm)(p),(0,n.Wm)(h,{modelValue:a.problem.description,"onUpdate:modelValue":t[0]||(t[0]=e=>a.problem.description=e),subfield:!1,defaultOpen:"preview",editable:!1,toolbarsFlag:!1,boxShadow:!1},null,8,["modelValue"]),(0,n.Wm)(w,{modelValue:a.activeHint,"onUpdate:modelValue":t[1]||(t[1]=e=>a.activeHint=e),accordion:"",style:{width:"100%"}},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.problem.hints,((e,t)=>((0,n.wg)(),(0,n.j4)(f,{title:"提示"+(t+1),name:e.id},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(e.description),1)])),_:2},1032,["title","name"])))),256))])),_:1},8,["modelValue"])])),_:1})])),_:1}),1===r.testStatus?((0,n.wg)(),(0,n.j4)(b,{key:0,label:"题解",name:"solution",style:{height:"calc(100vh - 231px)"}},{default:(0,n.w5)((()=>[(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n.Wm)(y,{problemId:a.problem.id,onShowDetail:r.showSolution,refresh:a.solutionKey},null,8,["problemId","onShowDetail","refresh"])])),_:1}),(0,n.Wm)(k,{type:"primary",circle:"",size:"large",style:{position:"absolute",bottom:"10px",right:"10px"},onClick:t[2]||(t[2]=e=>a.rightSideVisible="solutionAdd")},{icon:(0,n.w5)((()=>[(0,n.Wm)(v)])),_:1})])),_:1})):(0,n.kq)("",!0),(0,n.Wm)(b,{label:"提交记录",name:"submitRecord",style:{height:"calc(100vh - 231px)"}},{default:(0,n.w5)((()=>[(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n.Wm)(C,{data:a.answerRecords},{default:(0,n.w5)((()=>[(0,n.Wm)(x,{prop:"createTime",label:"提交时间"}),(0,n.Wm)(x,{prop:"language.name",label:"语言"}),(0,n.Wm)(x,{prop:"executeResult.name",label:"提交结果"},{default:(0,n.w5)((e=>[(0,n.Wm)(W,{type:"primary",href:`/answer_record_detail/${e.row.id}`},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(e.row.executeResult.name),1)])),_:2},1032,["href"])])),_:1}),(0,n.Wm)(x,{prop:"note",label:"备注","show-overflow-tooltip":""},{default:(0,n.w5)((e=>[e.row.note||e.row.noteEditVisible?e.row.noteEditVisible?((0,n.wg)(),(0,n.j4)(_,{key:1,modelValue:e.row.note,"onUpdate:modelValue":t=>e.row.note=t,onBlur:t=>r.changeNote(e.row)},null,8,["modelValue","onUpdate:modelValue","onBlur"])):((0,n.wg)(),(0,n.iD)("span",{key:2,onDblclick:t=>e.row.noteEditVisible=!0},(0,s.zw)(e.row.note),41,ve)):((0,n.wg)(),(0,n.j4)(W,{key:0,onClick:t=>e.row.noteEditVisible=!0},{default:(0,n.w5)((()=>[(0,n.Uk)("添加备注")])),_:2},1032,["onClick"]))])),_:1})])),_:1},8,["data"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1}),"codeEdit"===a.rightSideVisible?((0,n.wg)(),(0,n.j4)(R,{key:0,span:12},{default:(0,n.w5)((()=>[(0,n._)("div",ke,[(0,n.Wm)(T,{modelValue:a.languageId,"onUpdate:modelValue":t[4]||(t[4]=e=>a.languageId=e),placeholder:"Select",onChange:r.changeLanguageTemplate},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.languageList,(e=>((0,n.wg)(),(0,n.j4)(V,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),xe]),(0,n._)("div",null,[(0,n.Wm)(P,{value:a.code,"onUpdate:value":t[5]||(t[5]=e=>a.code=e),options:a.options,height:a.height},null,8,["value","options","height"])]),(0,n._)("div",We,[(0,n.Wm)(w,{class:"bottom-fix",modelValue:a.codeConsole.show,"onUpdate:modelValue":t[10]||(t[10]=e=>a.codeConsole.show=e),accordion:""},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{title:"控制台",name:"console"},{default:(0,n.w5)((()=>[(0,n.Wm)(S,{type:"border-card",modelValue:a.codeConsole.tab,"onUpdate:modelValue":t[9]||(t[9]=e=>a.codeConsole.tab=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{label:"测试用例",name:"testCase"},{default:(0,n.w5)((()=>[(0,n.Wm)(_,{type:"textarea",modelValue:a.codeConsole.testCase,"onUpdate:modelValue":t[6]||(t[6]=e=>a.codeConsole.testCase=e),resize:"none",rows:"3"},null,8,["modelValue"])])),_:1}),(0,n.Wm)(b,{label:"执行结果",name:"executeResult"},{default:(0,n.w5)((()=>[(0,n._)("div",null,[a.codeConsole.log?((0,n.wg)(),(0,n.iD)("div",_e,[(0,n.Wm)(_,{type:"textarea",readonly:"",rows:6,modelValue:a.codeConsole.log,"onUpdate:modelValue":t[7]||(t[7]=e=>a.codeConsole.log=e)},null,8,["modelValue"])])):a.codeConsole.error?((0,n.wg)(),(0,n.iD)("div",Ce,[(0,n.Wm)(_,{type:"textarea",readonly:"",rows:6,modelValue:a.codeConsole.error,"onUpdate:modelValue":t[8]||(t[8]=e=>a.codeConsole.error=e)},null,8,["modelValue"])])):((0,n.wg)(),(0,n.iD)("div",Se," 请先运行您的代码 "))])])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["modelValue"])])])),_:1})):"solutionDetail"===a.rightSideVisible?((0,n.wg)(),(0,n.j4)(R,{key:1,span:12},{default:(0,n.w5)((()=>[(0,n.Wm)(k,{onClick:t[11]||(t[11]=e=>a.rightSideVisible="codeEdit")},{default:(0,n.w5)((()=>[(0,n.Uk)("关闭")])),_:1}),(0,n.Wm)(U,{solution:a.solutionDetail},null,8,["solution"])])),_:1})):"solutionAdd"===a.rightSideVisible?((0,n.wg)(),(0,n.j4)(R,{key:2,span:12},{default:(0,n.w5)((()=>[(0,n._)("div",Re,[(0,n.Wm)(k,{onClick:t[12]||(t[12]=e=>a.rightSideVisible="codeEdit")},{default:(0,n.w5)((()=>[(0,n.Uk)("关闭")])),_:1}),Ve,(0,n.Wm)(k,{type:"success",onClick:r.addSolution},{default:(0,n.w5)((()=>[(0,n.Uk)("提交")])),_:1},8,["onClick"])]),(0,n.Wm)(j,null,{default:(0,n.w5)((()=>[(0,n.Wm)(I,{label:"标题"},{default:(0,n.w5)((()=>[(0,n.Wm)(_,{modelValue:a.solution.title,"onUpdate:modelValue":t[13]||(t[13]=e=>a.solution.title=e)},null,8,["modelValue"])])),_:1}),(0,n.Wm)(I,{label:"标签",prop:"label"},{default:(0,n.w5)((()=>[(0,n.Wm)(T,{modelValue:a.solution.labels,"onUpdate:modelValue":t[14]||(t[14]=e=>a.solution.labels=e),"value-key":"id",multiple:"",filterable:"","allow-create":"","default-first-option":"","reserve-keyword":!1,placeholder:"关联标签"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.labelList,(e=>((0,n.wg)(),(0,n.j4)(V,{key:e.id,label:e.name,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,n.Wm)(h,{modelValue:a.solution.description,"onUpdate:modelValue":t[15]||(t[15]=e=>a.solution.description=e),boxShadow:!1},null,8,["modelValue"])])),_:1})])),_:1})):(0,n.kq)("",!0)])),_:1})])),_:1}),(0,n.Wm)(Z,{class:"vcenter"},{default:(0,n.w5)((()=>[(0,n.Wm)(D,{gutter:20},{default:(0,n.w5)((()=>[r.testProblems?((0,n.wg)(),(0,n.j4)(R,{key:0,span:12,style:{display:"flex",padding:"0 10px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(k,{onClick:t[16]||(t[16]=e=>a.problemListVisible=!0)},{default:(0,n.w5)((()=>[(0,n.Uk)("题目列表")])),_:1}),Te,Pe,(0,n.Wm)(E,{class:"ml-4"},{default:(0,n.w5)((()=>[(0,n.Wm)(k,{onClick:t[17]||(t[17]=e=>r.toProblem(r.problemIndex-1))},{default:(0,n.w5)((()=>[(0,n.Uk)("上一题")])),_:1}),r.testProblems?((0,n.wg)(),(0,n.j4)(k,{key:0,disabled:""},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(r.problemIndex+1)+"/"+(0,s.zw)(r.problemCount),1)])),_:1})):(0,n.kq)("",!0),(0,n.Wm)(k,{onClick:t[18]||(t[18]=e=>r.toProblem(r.problemIndex+1))},{default:(0,n.w5)((()=>[(0,n.Uk)("下一题")])),_:1})])),_:1})])),_:1})):((0,n.wg)(),(0,n.j4)(R,{key:1,span:12})),"codeEdit"===a.rightSideVisible?((0,n.wg)(),(0,n.j4)(R,{key:2,span:12,style:{display:"flex",padding:"0 10px"}},{default:(0,n.w5)((()=>[0===r.testStatus?((0,n.wg)(),(0,n.j4)(k,{key:0,onClick:r.submitTest},{default:(0,n.w5)((()=>[(0,n.Uk)("交卷")])),_:1},8,["onClick"])):(0,n.kq)("",!0),Ue,(0,n.Wm)(k,{onClick:r.testCode},{default:(0,n.w5)((()=>[(0,n.Uk)("执行代码")])),_:1},8,["onClick"]),(0,n.Wm)(k,{type:"success",onClick:r.submitCode},{default:(0,n.w5)((()=>[(0,n.Uk)("提交")])),_:1},8,["onClick"])])),_:1})):((0,n.wg)(),(0,n.j4)(R,{key:3,span:12}))])),_:1})])),_:1})])),_:1}),(0,n.Wm)(A,{modelValue:a.problemListVisible,"onUpdate:modelValue":t[19]||(t[19]=e=>a.problemListVisible=e),direction:"ltr",size:"20%"},{default:(0,n.w5)((()=>[(0,n.Wm)(C,{data:r.testProblems,onRowClick:r.toProblemById},{default:(0,n.w5)((()=>[(0,n.Wm)(x,{property:"title",align:"center",label:"题目"})])),_:1},8,["data","onRowClick"])])),_:1},8,["modelValue"])],64)}const je={key:0},De={key:1,style:{height:"200px",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}};function Le(e,t,l,o,a,r){const i=(0,n.up)("el-avatar"),u=(0,n.up)("el-card");return 0!==a.solutions.length?((0,n.wg)(),(0,n.iD)("div",je,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.solutions,(t=>((0,n.wg)(),(0,n.j4)(u,{shadow:"never",onClick:l=>e.$emit("showDetail",t)},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{src:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg"},null,8,["src"]),(0,n._)("span",null,(0,s.zw)(t.title),1)])),_:2},1032,["onClick"])))),256))])):((0,n.wg)(),(0,n.iD)("div",De,"暂无题解"))}function Ee(e,t){return(0,A.Z)({url:"/api/solution",method:"get",params:{problemId:e,solutionId:t}})}function Ze(e,t){return(0,A.Z)({url:"/api/solution/my",method:"get",params:{problemId:e,solutionId:t}})}function Oe(e){return(0,A.Z)({url:"/api/solution",method:"post",data:e})}function Ae(e){return(0,A.Z)({url:"/api/solution",method:"put",data:e})}function He(e){return(0,A.Z)({url:"/api/solution",method:"delete",params:{solutionId:e}})}var qe={props:{problemId:{type:Number,required:!0},refresh:{type:Number,required:!1,default:1}},emits:["showDetail"],data(){return{solutions:[]}},watch:{problemId(e,t){e&&this.getSolutions()},refresh(e){e&&this.getSolutions()}},methods:{getSolutions(){Ee(this.problemId).then((e=>{this.solutions=e.content}))}},mounted(){}};const Me=(0,k.Z)(qe,[["render",Le]]);var Ne=Me;const ze={style:{height:"calc(100vh - 190px)"}};function Fe(e,t,l,o,a,r){const i=(0,n.up)("el-tag"),u=(0,n.up)("el-space"),d=(0,n.up)("el-divider"),m=(0,n.up)("mavon-editor"),c=(0,n.up)("el-scrollbar");return(0,n.wg)(),(0,n.iD)("div",ze,[(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n._)("h1",null,(0,s.zw)(l.solution.title),1),(0,n.Wm)(u,{wrap:""},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.solution.labels,(e=>((0,n.wg)(),(0,n.j4)(i,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(e.name),1)])),_:2},1024)))),256))])),_:1}),(0,n.Wm)(d),(0,n.Wm)(m,{style:{"min-height":"auto"},modelValue:l.solution.description,"onUpdate:modelValue":t[0]||(t[0]=e=>l.solution.description=e),subfield:!1,defaultOpen:"preview",editable:!1,toolbarsFlag:!1,boxShadow:!1},null,8,["modelValue"])])),_:1})])}var Ye=l(1208),Be={name:"SolutionDetail",components:{mavonEditor:Ye.mavonEditor},props:{solution:{required:!0,type:Object}},data(){return{}},methods:{getSolution(){Ee(this.solution.id).then((e=>{this.solution=e}))}}};const Je=(0,k.Z)(Be,[["render",Fe]]);var Ke=Je,Qe=l(6723),Ge=l(2748);l(6107),l(1146),l(2434),l(3064);function Xe(){return(0,A.Z)({url:"/api/language",method:"get"})}function $e(e){return(0,A.Z)({url:"/api/problem",method:"get",params:{problemId:e}})}function et(e){return(0,A.Z)({url:"/api/user/name",method:"get",params:{username:e}})}function tt(e){let t=new URLSearchParams;return e&&t.append("userIds",e),new A.Z({url:"/api/user/ids",method:"get",params:t})}function lt(){return(0,A.Z)({url:"/api/user/language",method:"get"})}function ot(e){return(0,A.Z)({url:"/api/judge",method:"post",data:e})}function nt(e){return(0,A.Z)({url:"/api/judge/test",method:"post",data:e})}var st={components:{navbar:T,solution:Ne,solutionDetail:Ke,Codemirror:Qe.ZP,mavonEditor:Ye.mavonEditor,Edit:Ge.I8b,Plus:Ge.v37},props:["id"],data(){return{options:{autorefresh:!0,smartIndent:!0,tabSize:4,mode:"application/json",theme:"dracula",line:!0,viewportMargin:1/0,highlightDifferences:!0,autofocus:!1,indentUnit:4,readOnly:!1,showCursorWhenSelecting:!0,firstLineNumber:1,matchBrackets:!0,autocapitalize:!0},leftTab:null,solutionDetail:{},rightSideVisible:"codeEdit",height:document.documentElement.clientHeight-240,languageId:null,languageList:[],labelList:[],problem:{},solution:{},solutionKey:0,test:null,problemListVisible:!1,code:"",activeHint:0,answerRecords:[],codeConsole:{show:null,tab:"testCase",testCase:"",error:null,log:null},noteEditVisible:!1}},computed:{testProblems(){if(this.testExaminationPaper)return this.testExaminationPaper.examinationPaperProblems.map((e=>e.problem))},testExaminationPaper(){if(this.test)return this.test.examinationPaper},testCountdown(){return this.test?Date.parse(this.test.endTime):Date.now()},problemCount(){return this.testProblems.length},problemIndex(){return this.testProblems.findIndex((e=>e.id===this.problem.id))},testStatus(){if(this.test)return this.checkTestStatus(this.test)}},methods:{changeNote(e){N(e).then((t=>{e.noteEditVisible=!1}))},changeLanguageTemplate(e){this.code=this.languageList.filter((t=>t.id===e))[0].compileStatement},submitTest(){const e={testId:this.test.id};ae(e).then((e=>{!1===e&&pe.bM.error("提交失败"),this.$router.push({path:`/test_result/${this.test.id}`})}))},getLabelList(){H().then((e=>{this.labelList=e}))},addSolution(){this.solution.problem=this.problem,Oe(this.solution).then((e=>{this.solutionKey++,this.showSolution(e),this.rightSideVisible="solutionDetail"}))},toProblemById(e){this.$router.push({path:`/problem/${e.id}`,query:{examId:this.test.id}})},toProblem(e){if(e>=this.problemCount||e<0)return;const t=this.testProblems[e].id;this.$router.push({path:`/problem/${t}`,query:{examId:this.test.id}})},submitCode(){let e={code:this.code,languageId:this.languageId,problemId:this.problem.id,testId:this.test.id};ot(e).then((e=>{this.codeConsole.error=e.error,this.codeConsole.log=e.log,this.codeConsole.show="console",this.codeConsole.tab="executeResult",this.leftTab="submitRecord",this.getAnswerRecords()}))},judgeTest(){let e={code:this.code,languageId:this.languageId,input:this.codeConsole.testCase};nt(e).then((e=>{this.codeConsole.error=e.error,this.codeConsole.log=e.log,this.codeConsole.show="console",this.codeConsole.tab="executeResult"}))},getProblem(e){let t=this.id;t||(t=this.testProblems[0].id),$e(t).then((l=>{this.problem=l.content[0],e(t)}))},getLanguageList(){Xe().then((e=>{this.languageList=e.content}))},getSolutions(){Ee(this.problem.id).then((e=>{console.log(e),this.solutions=e}))},getAnswerRecords(){let e=null;0===this.checkTestStatus(this.test)&&(e=this.test.id,this.checkSubmitTest()),q(this.problem.id,null,e).then((e=>{this.answerRecords=e.content,this.getUserUseLanguage(this.answerRecords)}))},getUserUseLanguage(e){lt().then((e=>{this.languageId=e}))},showSolution(e){this.solutionDetail=e,this.rightSideVisible="solutionDetail"},testCode(){if(0===this.codeConsole.testCase.length)return pe.bM.error({title:"测试用例不能为空",duration:5e3}),this.codeConsole.show="console",void(this.codeConsole.tab="testCase");this.judgeTest()},checkTestStatus(e){return(0,O.W5)(e)},clearData(){this.leftTab=null,this.solutionDetail={},this.rightSideVisible="codeEdit",this.height=document.documentElement.clientHeight-240,this.problem={},this.examinationPaper={},this.problemListVisible=!1,this.code="",this.activeHint=0,this.answerRecords=[],this.codeConsole={show:null,tab:"testCase",testCase:"",error:null,log:null}},loadData(){const e=this.$route.query.examId,t=this.$route.query.answerRecordId;t?q(null,t).then((e=>{this.code=e.content[0].code,le(e.content[0].testId).then((e=>{this.test=e.content[0],this.getProblem((e=>{q(e).then((e=>{this.answerRecords=e.content,this.getUserUseLanguage(this.answerRecords)}))}))}))})):e?le(e).then((t=>{this.test=t.content[0];let l=null;0===this.checkTestStatus(this.test)&&(l=e,this.checkSubmitTest()),this.getProblem((e=>{q(e,null,l).then((e=>{this.answerRecords=e.content,this.getUserUseLanguage(this.answerRecords)}))}))})):(pe.bM.error("非法情况"),this.$router.back(1))},checkSubmitTest(){re(this.test.id).then((e=>{e&&S.T.alert("你已经完成过作答","警告",{confirmButtonText:"确认退出",callback:e=>{this.$router.back(1)}})}))}},mounted(){this.loadData(),this.getLanguageList(),this.getLabelList(),window.addEventListener("resize",(0,O.Ds)((()=>{this.height&&(this.height=document.documentElement.clientHeight-240)}),100))},created(){this.$watch((()=>this.$route.params),((e,t)=>{this.clearData(),this.loadData()}))}};const at=(0,k.Z)(st,[["render",Ie]]);var rt=at;const it=e=>((0,n.dD)("data-v-5aa9e7f0"),e=e(),(0,n.Cn)(),e),ut=it((()=>(0,n._)("div",{style:{display:"flex","flex-grow":"1"}},null,-1))),dt=it((()=>(0,n._)("div",{style:{display:"flex","flex-grow":"1"}},null,-1))),mt=it((()=>(0,n._)("h1",null,"提交记录",-1))),ct={class:"border"},pt={style:{display:"flex"}},ht=it((()=>(0,n._)("div",{style:{"flex-grow":"1"}},null,-1))),ft={key:0,class:"error"},wt={style:{display:"flex"}},gt=it((()=>(0,n._)("h2",null,"提交的代码:",-1))),bt=it((()=>(0,n._)("div",{style:{"flex-grow":"1"}},null,-1))),yt={style:{display:"flex"}},vt={style:{"text-align":"center"}};function kt(e,t,l,o,a,r){const i=(0,n.up)("navbar"),u=(0,n.up)("el-header"),d=(0,n.up)("el-input"),m=(0,n.up)("el-divider"),c=(0,n.up)("el-link"),p=(0,n.up)("el-button"),h=(0,n.up)("codemirror"),f=(0,n.up)("el-col"),w=(0,n.up)("el-row"),g=(0,n.up)("el-container");return(0,n.wg)(),(0,n.j4)(g,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[(0,n.Wm)(i,null,{left:(0,n.w5)((()=>[ut])),right:(0,n.w5)((()=>[dt])),_:1})])),_:1}),(0,n.Wm)(w,{justify:"center"},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{span:18},{default:(0,n.w5)((()=>[(0,n._)("h3",null,(0,s.zw)(a.answerRecord.problem.title),1),mt,(0,n._)("div",ct,[(0,n._)("div",pt,[(0,n._)("div",null,(0,s.zw)(a.answerRecord.passNum)+" / "+(0,s.zw)(r.totalCase)+" 个通过测试用例",1),ht,(0,n._)("div",null,[(0,n._)("div",null,[(0,n.Uk)("状态: "),(0,n._)("span",null,(0,s.zw)(a.answerRecord.executeResult.name),1)]),(0,n._)("div",null,[(0,n.Uk)("提交时间: "),(0,n._)("span",null,(0,s.zw)(a.answerRecord.createTime),1)])])]),a.answerRecord.error?((0,n.wg)(),(0,n.iD)("div",ft,[(0,n.Wm)(d,{type:"textarea",rows:6,readonly:"",resize:"none",modelValue:a.answerRecord.error,"onUpdate:modelValue":t[0]||(t[0]=e=>a.answerRecord.error=e)},null,8,["modelValue"])])):(0,n.kq)("",!0)]),(0,n.Wm)(m),(0,n._)("div",wt,[(0,n._)("div",null,[gt,(0,n._)("div",null,[(0,n.Uk)("语言: "),(0,n._)("span",null,(0,s.zw)(a.answerRecord.language.name),1)])]),bt,(0,n._)("div",null,[a.answerRecord.note||a.answerRecord.noteEditVisible?a.answerRecord.noteEditVisible?((0,n.wg)(),(0,n.j4)(d,{key:1,modelValue:a.answerRecord.note,"onUpdate:modelValue":t[2]||(t[2]=e=>a.answerRecord.note=e),onBlur:t[3]||(t[3]=e=>r.changeNote(a.answerRecord))},null,8,["modelValue"])):((0,n.wg)(),(0,n.iD)("span",{key:2,onClick:t[4]||(t[4]=e=>a.answerRecord.noteEditVisible=!0)},(0,s.zw)(a.answerRecord.note),1)):((0,n.wg)(),(0,n.j4)(c,{key:0,onClick:t[1]||(t[1]=e=>a.answerRecord.noteEditVisible=!0)},{default:(0,n.w5)((()=>[(0,n.Uk)("添加备注")])),_:1})),(0,n.Wm)(p,{type:"success",onClick:r.toProblem},{default:(0,n.w5)((()=>[(0,n.Uk)("编辑代码")])),_:1},8,["onClick"])])]),(0,n._)("div",yt,[(0,n.Wm)(h,{value:a.answerRecord.code,"onUpdate:value":t[5]||(t[5]=e=>a.answerRecord.code=e),options:a.options},null,8,["value","options"])]),(0,n._)("div",vt,[(0,n.Wm)(p,{onClick:t[6]||(t[6]=t=>e.$router.back(1)),text:"plain"},{default:(0,n.w5)((()=>[(0,n.Uk)("返回")])),_:1})])])),_:1})])),_:1})])),_:1})}var xt={name:"AnswerRecordDetail",components:{navbar:T,Codemirror:Qe.ZP},computed:{totalCase(){return this.answerRecord.passNum+this.answerRecord.notPassNum}},props:["id"],data(){return{answerRecord:{problem:{},executeResult:{},language:{}},options:{autorefresh:!0,smartIndent:!0,tabSize:4,mode:"application/json",theme:"dracula",line:!0,viewportMargin:1/0,highlightDifferences:!0,autofocus:!1,indentUnit:2,readOnly:!0,showCursorWhenSelecting:!0,firstLineNumber:1,matchBrackets:!0}}},methods:{changeNote(e){N(e).then((t=>{e.noteEditVisible=!1}))},getAnswerRecord(){q(null,this.id).then((e=>{this.answerRecord=e.content[0],console.log(this.answerRecord)}))},toProblem(){this.$router.push({path:`/problem/${this.answerRecord.problem.id}`,query:{answerRecordId:this.id}})}},mounted(){this.getAnswerRecord()}};const Wt=(0,k.Z)(xt,[["render",kt],["__scopeId","data-v-5aa9e7f0"]]);var _t=Wt;const Ct=(0,n._)("h1",{style:{"text-align":"center"}},"HUHUOJ",-1),St={key:0},Rt={key:1};function Vt(e,t,l,o,s,a){const r=(0,n.up)("el-input"),i=(0,n.up)("el-form-item"),u=(0,n.up)("el-image"),d=(0,n.up)("el-button"),m=(0,n.up)("el-form"),c=(0,n.up)("el-card"),p=(0,n.up)("el-col"),h=(0,n.up)("el-row"),f=(0,n.Q2)("loading");return(0,n.wg)(),(0,n.j4)(h,{gutter:20,justify:"center",style:{"align-items":"center",height:"100%"}},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{span:8},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{onKeyup:(0,B.D2)(a.login,["enter"])},{header:(0,n.w5)((()=>[Ct])),default:(0,n.w5)((()=>[(0,n.Wm)(m,{model:s.form,"status-icon":"",rules:s.rules,ref:"form"},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{prop:"username"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{type:"text",modelValue:s.form.username,"onUpdate:modelValue":t[0]||(t[0]=e=>s.form.username=e),autocomplete:"off",placeholder:"账号"},null,8,["modelValue"])])),_:1}),(0,n.Wm)(i,{prop:"password"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{"show-password":"",modelValue:s.form.password,"onUpdate:modelValue":t[1]||(t[1]=e=>s.form.password=e),clearable:"",placeholder:"密码"},null,8,["modelValue"])])),_:1}),(0,n.Wm)(i,{prop:"code"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{modelValue:s.form.code,"onUpdate:modelValue":t[2]||(t[2]=e=>s.form.code=e),placeholder:"输入图形验证码"},{suffix:(0,n.w5)((()=>[(0,n.Wm)(u,{src:s.photoSrc,"data-original":"photoSrc",onClick:a.refreshCode},null,8,["src","onClick"])])),_:1},8,["modelValue"])])),_:1}),(0,n.Wm)(i,null,{default:(0,n.w5)((()=>[(0,n.wy)(((0,n.wg)(),(0,n.j4)(d,{type:"primary",onClick:a.login},{default:(0,n.w5)((()=>[s.loading?((0,n.wg)(),(0,n.iD)("span",Rt,"登 录 中...")):((0,n.wg)(),(0,n.iD)("span",St,"登 录"))])),_:1},8,["onClick"])),[[f,s.loading]]),(0,n.Wm)(d,{onClick:t[3]||(t[3]=e=>a.resetForm("form"))},{default:(0,n.w5)((()=>[(0,n.Uk)(" 重置 ")])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["onKeyup"])])),_:1})])),_:1})}var Tt=l(9895),Pt=l(680),Ut=(l(949),{props:["redirect"],data(){return{photoSrc:"",form:{username:"",password:"",code:"",uuid:"",addr:""},loading:!1,rules:{username:[{required:!0,message:"账号不能为空",trigger:"blur"}],password:[{required:!0,message:"请输入密码",transform:e=>e?e.trim():"",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",transform:e=>e?e.trim():"",trigger:"blur"}]}}},methods:{resetForm(e){this.$refs[e].resetFields(),this.form.password="",this.refreshCode()},login(){this.$refs.form.validate((e=>{e?(this.loading=!0,this.$store.dispatch("Login",this.form).then((()=>{this.loading=!1,this.$router.push({path:this.$route.query.redirect||"/"})})).catch((()=>{this.loading=!1,this.refreshCode()}))):this.refreshCode()}))},point(){const e=void 0!==Pt.Z.get("point");e&&((0,pe.bM)({title:"提示",message:"当前登录状态已过期，请重新登录！",type:"warning",duration:5e3}),Pt.Z.remove("point"))},refreshCode(){(0,Tt.Cq)().then((e=>{this.photoSrc=e.img,this.form.uuid=e.uuid}))}},created(){this.refreshCode(),this.point(),(0,Tt.vG)().then((e=>this.form.addr=e))}});const It=(0,k.Z)(Ut,[["render",Vt]]);var jt=It;const Dt={key:0};function Lt(e,t,l,o,s,a){const r=(0,n.up)("navbar"),i=(0,n.up)("el-header"),u=(0,n.up)("el-step"),d=(0,n.up)("el-steps"),m=(0,n.up)("mavon-editor"),c=(0,n.up)("el-button"),p=(0,n.up)("el-col"),h=(0,n.up)("el-row"),f=(0,n.up)("el-main"),w=(0,n.up)("el-footer"),g=(0,n.up)("el-container");return(0,n.wg)(),(0,n.j4)(g,null,{default:(0,n.w5)((()=>[(0,n.Wm)(i,null,{default:(0,n.w5)((()=>[(0,n.Wm)(r)])),_:1}),(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[(0,n.Wm)(h,{justify:"center",align:"middle",gutter:"20"},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{span:18},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{active:s.step,"finish-status":"finish",simple:"",style:{"margin-bottom":"20px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{title:"未到测验时间"}),(0,n.Wm)(u,{title:"测验开始"}),(0,n.Wm)(u,{title:"测验已结束"})])),_:1},8,["active"]),(0,n.Wm)(m,{modelValue:s.test.examinationPaper.description,"onUpdate:modelValue":t[0]||(t[0]=e=>s.test.examinationPaper.description=e),subfield:!1,defaultOpen:"preview",editable:!1,toolbarsFlag:!1,boxShadow:!1},null,8,["modelValue"]),(0,n._)("div",null,[s.step+1===1?((0,n.wg)(),(0,n.iD)("span",Dt,"测验未开始")):(0,n.kq)("",!0),s.step+1===2?((0,n.wg)(),(0,n.j4)(c,{key:1,onClick:a.toProblem},{default:(0,n.w5)((()=>[(0,n.Uk)("进入测验")])),_:1},8,["onClick"])):(0,n.kq)("",!0),s.step+1===3?((0,n.wg)(),(0,n.j4)(c,{key:2,onClick:a.toProblem},{default:(0,n.w5)((()=>[(0,n.Uk)("查看题目")])),_:1},8,["onClick"])):(0,n.kq)("",!0)])])),_:1})])),_:1})])),_:1}),(0,n.Wm)(w)])),_:1})}var Et={name:"ExaminationPaper",components:{navbar:T,mavonEditor:Ye.mavonEditor},props:["id"],data(){return{test:{examinationPaper:{problems:[]}},step:0}},methods:{getTestInfo(){le(this.id).then((e=>{if(this.test=e.content[0],!this.test.enabled)return void(this.step=2);const t=Date.parse(new Date),l=Date.parse(this.test.startTime),o=Date.parse(this.test.endTime);this.step=t<l?0:t>l&&t<o?1:2}))},toProblem(){this.$router.push({path:"/problem",query:{examId:this.test.id}})}},created(){this.getTestInfo()}};const Zt=(0,k.Z)(Et,[["render",Lt]]);var Ot=Zt;const At=e=>((0,n.dD)("data-v-159dd744"),e=e(),(0,n.Cn)(),e),Ht={class:"errPage-container"},qt=At((()=>(0,n._)("h1",{class:"text-jumbo text-ginormous"}," Oops! ",-1))),Mt=At((()=>(0,n._)("h2",null,"你没有权限去该页面",-1))),Nt=At((()=>(0,n._)("h6",null,"如有不满请联系你领导",-1))),zt={class:"list-unstyled"},Ft=At((()=>(0,n._)("li",null,"或者你可以去:",-1))),Yt={class:"link-type"},Bt=["src"];function Jt(e,t,l,o,s,a){const r=(0,n.up)("el-button"),i=(0,n.up)("router-link"),u=(0,n.up)("el-col"),d=(0,n.up)("el-row");return(0,n.wg)(),(0,n.iD)("div",Ht,[(0,n.Wm)(r,{icon:"arrow-left",class:"pan-back-btn",onClick:a.back},{default:(0,n.w5)((()=>[(0,n.Uk)(" 返回 ")])),_:1},8,["onClick"]),(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,{span:12},{default:(0,n.w5)((()=>[qt,Mt,Nt,(0,n._)("ul",zt,[Ft,(0,n._)("li",Yt,[(0,n.Wm)(i,{to:"/"},{default:(0,n.w5)((()=>[(0,n.Uk)(" 回首页 ")])),_:1})])])])),_:1}),(0,n.Wm)(u,{span:12},{default:(0,n.w5)((()=>[(0,n._)("img",{src:s.errGif,width:"313",height:"428",alt:"Girl has dropped her ice cream."},null,8,Bt)])),_:1})])),_:1})])}var Kt=l.p+"img/401.1800ba9e.gif",Qt={name:"Page401",data(){return{errGif:Kt+"?"+ +new Date}},methods:{back(){this.$route.query.noGoBack?this.$router.push({path:"/"}):this.$router.go(-2)}}};const Gt=(0,k.Z)(Qt,[["render",Jt],["__scopeId","data-v-159dd744"]]);var Xt=Gt,$t=l.p+"img/404.458c248a.png",el="data:image/png;base64,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";const tl=e=>((0,n.dD)("data-v-84afe8a6"),e=e(),(0,n.Cn)(),e),ll={class:"wscn-http404-container"},ol={class:"wscn-http404"},nl=(0,n.uE)('<div class="pic-404" data-v-84afe8a6><img class="pic-404__parent" src="'+$t+'" alt="404" data-v-84afe8a6><img class="pic-404__child left" src="'+el+'" alt="404" data-v-84afe8a6><img class="pic-404__child mid" src="'+el+'" alt="404" data-v-84afe8a6><img class="pic-404__child right" src="'+el+'" alt="404" data-v-84afe8a6></div>',1),sl={class:"bullshit"},al=tl((()=>(0,n._)("div",{class:"bullshit__oops"},"OOPS!",-1))),rl={class:"bullshit__headline"},il=tl((()=>(0,n._)("div",{class:"bullshit__info"},"请检查您输入的网址是否正确，请点击以下按钮返回主页或者发送错误报告",-1))),ul=tl((()=>(0,n._)("a",{href:"/",class:"bullshit__return-home"},"返回首页",-1)));function dl(e,t,l,o,a,r){return(0,n.wg)(),(0,n.iD)("div",ll,[(0,n._)("div",ol,[nl,(0,n._)("div",sl,[al,(0,n._)("div",rl,(0,s.zw)(r.message),1),il,ul])])])}var ml={name:"Page404",computed:{message(){return"网管说这个页面你不能进......"}}};const cl=(0,k.Z)(ml,[["render",dl],["__scopeId","data-v-84afe8a6"]]);var pl=cl,hl=l(5842),fl=l(530),wl=l.n(fl),gl=l(1836);function bl(e,t,l,o,s,a){const r=(0,n.up)("navbar"),i=(0,n.up)("el-header"),u=(0,n.up)("el-statistic"),d=(0,n.up)("v-chart"),m=(0,n.up)("el-col"),c=(0,n.up)("el-row"),p=(0,n.up)("el-main"),h=(0,n.up)("el-container");return(0,n.wg)(),(0,n.j4)(h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(i,null,{default:(0,n.w5)((()=>[(0,n.Wm)(r)])),_:1}),(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,{title:"测验分数",value:s.testResult.score},null,8,["value"]),(0,n.Wm)(c,{justify:"center"},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{span:24},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{option:a.option,autosize:"",class:"chart"},null,8,["option"]),(0,n.Wm)(d,{option:a.option1,autosize:"",class:"chart"},null,8,["option"])])),_:1})])),_:1})])),_:1})])),_:1})}var yl={name:"TestResultDetail",components:{navbar:T,VChart:Z.ZP},props:["id"],computed:{test(){if(this.testResult)return this.testResult.test},examinationPaper(){if(this.test)return this.test.examinationPaper},examinationPaperProblems(){if(this.examinationPaper)return this.examinationPaper.examinationPaperProblems},problems(){if(this.examinationPaperProblems)return this.examinationPaperProblems.map((e=>e.problem))},answerRecords(){if(this.test)return this.test.answerRecords},option(){if(!this.examinationPaperProblems)return;if(!this.answerRecords)return;const e=this.examinationPaperProblems,t=this.answerRecords.groupBy((e=>e.problem.title)),l=e.map((e=>{const l=e.problem.title;if(!t[l])return{title:l,"未通过":0,"已通过":0};const o=t[l].filter((e=>1===e.executeResult.id)).length,n=t[l].length-o;return{title:l,"未通过":n,"已通过":o}}));return{legend:{},tooltip:{},dataset:[{dimensions:["title","未通过","已通过"],source:l}],xAxis:{type:"category"},yAxis:{},series:[{type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"}},{type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"}}]}},option1(){if(!this.examinationPaperProblems)return;if(!this.answerRecords)return;const e=this.examinationPaperProblems,t=(0,O.Cj)(e.map((e=>e.problem.problemKnowledges||[])).reduce(((e,t)=>e.concat(t))).map((e=>e&&e.knowledge.name))),l=this.answerRecords.filter((e=>1===e.executeResult.id)).map((e=>e.problem.title)),o=t.map((t=>{const o=e.map((e=>e.problem.problemKnowledges)).reduce(((e,t)=>e.concat(t))).filter((e=>e.knowledge.name===t)).map((e=>e.weight));let n=[];try{n=e.filter((e=>-1!==l.indexOf(e.problem.title))).map((e=>e.problem.problemKnowledges)).reduce(((e,t)=>e.concat(t))).filter((e=>e.knowledge.name===t)).map((e=>e.weight))}catch(a){}let s=Math.floor(n.reduce(((e,t)=>e+t),0)/o.reduce(((e,t)=>e+t),0)*1e4)/100;return isFinite(s)||(s=0),{knowledgeName:t,"知识点掌握程度":s}}));return{legend:{},tooltip:{},dataset:[{dimensions:["knowledgeName","知识点掌握程度"],source:o}],series:[{type:"bar",label:{show:!0}}],xAxis:{type:"category"},yAxis:{type:"value",axisLabel:{formatter:"{value}%"}}}}},data(){return{testResult:{}}},methods:{getTestResult(){re(this.id).then((e=>{e.test=JSON.parse(e.testJsonStr||{}),this.testResult=e}))}},mounted(){this.getTestResult()}};const vl=(0,k.Z)(yl,[["render",bl],["__scopeId","data-v-955c6164"]]);var kl=vl;const xl={slot:"footer",class:"dialog-footer"};function Wl(e,t,l,o,a,r){const i=(0,n.up)("el-input"),u=(0,n.up)("el-form-item"),d=(0,n.up)("el-option"),m=(0,n.up)("el-select"),c=(0,n.up)("mavon-editor"),p=(0,n.up)("el-form"),h=(0,n.up)("el-button"),f=(0,n.up)("el-dialog"),w=(0,n.up)("el-header"),g=(0,n.up)("el-table-column"),b=(0,n.up)("el-tag"),y=(0,n.up)("el-popconfirm"),v=(0,n.up)("el-table"),k=(0,n.up)("el-main"),x=(0,n.up)("el-container");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(f,{"close-on-click-modal":!1,modelValue:a.formVisible,"onUpdate:modelValue":t[4]||(t[4]=e=>a.formVisible=e),title:"修改题解",width:"80%"},{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,{label:"标题"},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{modelValue:a.form.title,"onUpdate:modelValue":t[0]||(t[0]=e=>a.form.title=e)},null,8,["modelValue"])])),_:1}),(0,n.Wm)(u,{label:"标签",prop:"label"},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{modelValue:a.form.labels,"onUpdate:modelValue":t[1]||(t[1]=e=>a.form.labels=e),"value-key":"id",multiple:"",filterable:"","allow-create":"","default-first-option":"","reserve-keyword":!1,placeholder:"关联标签"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.labelList,(e=>((0,n.wg)(),(0,n.j4)(d,{key:e.id,label:e.name,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,n.Wm)(c,{modelValue:a.form.description,"onUpdate:modelValue":t[2]||(t[2]=e=>a.form.description=e),boxShadow:!1},null,8,["modelValue"])])),_:1}),(0,n._)("div",xl,[(0,n.Wm)(h,{type:"text",onClick:t[3]||(t[3]=e=>a.formVisible=!1)},{default:(0,n.w5)((()=>[(0,n.Uk)("取消")])),_:1}),(0,n.Wm)(h,{type:"primary",onClick:r.updateSolution},{default:(0,n.w5)((()=>[(0,n.Uk)("确认")])),_:1},8,["onClick"])])])),_:1},8,["modelValue"]),(0,n.Wm)(x,null,{default:(0,n.w5)((()=>[(0,n.Wm)(w),(0,n.Wm)(k,null,{default:(0,n.w5)((()=>[(0,n.Wm)(v,{data:a.solutions},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{prop:"title","show-overflow-tooltip":"",label:"题解名称"}),(0,n.Wm)(g,{prop:"description","show-overflow-tooltip":"",label:"描述"}),(0,n.Wm)(g,{prop:"labels",label:"标签"},{default:(0,n.w5)((e=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.row.labels,(e=>((0,n.wg)(),(0,n.j4)(b,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(e.name),1)])),_:2},1024)))),256))])),_:1}),(0,n.Wm)(g,{prop:"problem.title",label:"所属题目"}),(0,n.Wm)(g,{label:"操作"},{default:(0,n.w5)((e=>[(0,n.Wm)(h,{size:"small",onClick:t=>r.openCU(e.row)},{default:(0,n.w5)((()=>[(0,n.Uk)("修改")])),_:2},1032,["onClick"]),(0,n.Wm)(y,{title:"确认删除",onConfirm:t=>r.delSolution(e.row)},{reference:(0,n.w5)((()=>[(0,n.Wm)(h,{size:"small",type:"danger"},{default:(0,n.w5)((()=>[(0,n.Uk)("删除")])),_:1})])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"])])),_:1})])),_:1})],64)}var _l={name:"SolutionManage",components:{mavonEditor:Ye.mavonEditor},data(){return{solutions:[],formVisible:!1,form:{title:null,description:null,labels:[]},labelList:[]}},methods:{getSolutions(){Ze().then((e=>{this.solutions=e.content}))},openCU(e){this.form=e,this.formVisible=!0},updateSolution(){Ae(this.form).then((e=>{pe.bM.success("更新成功"),this.formVisible=!1}))},delSolution(){He(this.form.id).then((e=>{pe.bM.success("删除成功")}))},getLabelList(){H().then((e=>{this.labelList=e}))}},created(){this.getSolutions(),this.getLabelList()}};const Cl=(0,k.Z)(_l,[["render",Wl]]);var Sl=Cl;function Rl(e,t,l,o,s,a){const r=(0,n.up)("el-option"),i=(0,n.up)("el-select"),u=(0,n.up)("el-header"),d=(0,n.up)("student-career"),m=(0,n.up)("el-main"),c=(0,n.up)("el-container");return(0,n.wg)(),(0,n.j4)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[(0,n.Wm)(i,{modelValue:s.studentId,"onUpdate:modelValue":t[0]||(t[0]=e=>s.studentId=e),filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入学生姓名","remote-method":a.searchUser,loading:s.loading},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.userList,(e=>((0,n.wg)(),(0,n.j4)(r,{key:e.id,value:e.id,label:e.nickName},null,8,["value","label"])))),128))])),_:1},8,["modelValue","remote-method","loading"])])),_:1}),(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d,{"student-id":this.studentId},null,8,["student-id"])])),_:1})])),_:1})}function Vl(e,t,l,o,s,a){const r=(0,n.up)("el-statistic"),i=(0,n.up)("el-col"),u=(0,n.up)("el-row"),d=(0,n.up)("el-card"),m=(0,n.up)("v-chart");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,{gutter:20},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{span:8},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{title:"测验总数",value:a.testCount},null,8,["value"])])),_:1}),(0,n.Wm)(i,{span:8},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{title:"平均完成率",value:a.averageCompletion},null,8,["value"])])),_:1}),(0,n.Wm)(i,{span:8},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{title:"平均正确率",value:a.averageCorrect},null,8,["value"])])),_:1})])),_:1})])),_:1}),(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[(0,n.Wm)(i,{span:24},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{option:a.careerData,autosize:"",class:"chart"},null,8,["option"])])),_:1})])),_:1})])),_:1})],64)}var Tl={name:"StudentCareer",components:{VChart:Z.ZP},props:["studentId"],computed:{testCount(){return this.testRecords.length},tests(){if(this.testCount)return this.testRecords.map((e=>e.test))},examinationPapers(){if(this.tests)return this.tests.map((e=>e.examinationPaper))},examinationPaperProblems(){if(this.examinationPapers)return this.examinationPapers.map((e=>e.examinationPaperProblems))},problems(){if(this.examinationPaperProblems)return this.examinationPaperProblems.map((e=>e.map((e=>e.problem))))},answerRecords(){if(this.testCount)return this.tests.map((e=>e.answerRecords))},averageCompletion(){if(!this.problems)return;if(!this.answerRecords)return;let e=0;return this.problems.forEach(((t,l)=>{const o=t.length,n=(0,O.on)(this.answerRecords[l].map((e=>e.problem)),"id").length;e+=n/o})),(e/this.problems.length*100).toFixed(2)+"%"},averageCorrect(){if(!this.problems)return;if(!this.answerRecords)return;let e=0;return this.problems.forEach(((t,l)=>{const o=t.length,n=(0,O.on)(this.answerRecords[l].filter((e=>1===e.executeResult.id)).map((e=>e.problem)),"id").length;e+=n/o})),(e/this.problems.length*100).toFixed(2)+"%"},careerData(){let e=[];if(this.tests){e=this.tests.map(((e,t)=>{const l=e.startTime,o=this.testRecords[t].score,n=this.problems[t].length,s=(0,O.on)(this.answerRecords[t].filter((e=>1===e.executeResult.id)).map((e=>e.problem)),"id").length;return{"时间":(0,O.TD)(l,`{y}-{m}-{d} ${e.title}`),"分数":o,"正确率":s/n*100}}));const t=Math.max(e.map((e=>e.score))),l=Math.min(e.map((e=>e.score)));e.forEach((e=>{t-l!==0&&(e.score=(e.score-l)/(t-l))})),console.log(e)}return{legend:{},tooltip:{},dataset:[{dimensions:["时间","分数","正确率"],source:e}],dataZoom:[{type:"slider"},{type:"inside"}],xAxis:{type:"category"},yAxis:{},series:[{type:"bar",label:{show:!0},emphasis:{focus:"series"}},{type:"line",label:{show:!0},emphasis:{focus:"series"}}]}}},data(){return{testRecords:[]}},watch:{studentId(e){console.log(e),this.getStudentRecords()}},methods:{getRecords(){ie().then((e=>{e.forEach((e=>{e.test=JSON.parse(e.testJsonStr)})),this.testRecords=e}))},getStudentRecords(){ne(this.studentId).then((e=>{e.forEach((e=>{e.test=JSON.parse(e.testJsonStr)})),this.testRecords=e}))}},created(){this.studentId?this.getStudentRecords():this.getRecords()}};const Pl=(0,k.Z)(Tl,[["render",Vl],["__scopeId","data-v-9ce6bb92"]]);var Ul=Pl,Il={name:"StudentAnalysis",components:{StudentCareer:Ul},data(){return{studentId:null,userList:[],loading:!1}},methods:{searchUser(e){this.loading=!0,et(e).then((e=>{this.loading=!1,this.userList=e}))}}};const jl=(0,k.Z)(Il,[["render",Rl]]);var Dl=jl;function Ll(e,t,l,o,s,a){const r=(0,n.up)("el-option"),i=(0,n.up)("el-select"),u=(0,n.up)("v-chart");return(0,n.wg)(),(0,n.iD)(n.HY,null,[this.id?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(i,{key:0,modelValue:s.testId,"onUpdate:modelValue":t[0]||(t[0]=e=>s.testId=e),onChange:a.getTest},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.tests,(e=>((0,n.wg)(),(0,n.j4)(r,{key:e.id,label:e.title,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])),(0,n.Wm)(u,{option:a.testData,class:"chart",autoresize:""},null,8,["option"])],64)}const El={connect(e){return new WebSocket(`/${e}`)}};var Zl=El,Ol={name:"TestAnalysis",props:["id"],components:{VChart:Z.ZP},computed:{examinationPaper(){if(this.test)return this.test.examinationPaper},examinationPaperProblems(){if(this.examinationPaper)return this.examinationPaper.examinationPaperProblems},problems(){if(this.examinationPaperProblems)return this.examinationPaperProblems.map((e=>e.problem))},answerRecords(){if(this.test)return this.test.answerRecords},testData(){if(!this.answerRecords)return;if(!this.users)return;const e=this.answerRecords.groupBy((e=>e.userId)),t=new Map;this.users.forEach((e=>{t.set(e.id+"",e.deptId)}));const l=(0,O.Cj)(this.users.map((e=>e.deptId))),o=[];for(let i=0;i<l.length;i++)o.push([]);Object.entries(e).forEach((([e,n])=>{const s=this.averageCompletion(n),a=this.averageCorrect(n),r=t.get(e);o[l.indexOf(r)].push([s,a])})),console.log(o);const n=o.reduce(((e,t)=>e.concat(t)),[]),s=n.map((e=>e[0])).reduce(((e,t)=>e+t),0)/n.length,a=n.map((e=>e[1])).reduce(((e,t)=>e+t),0)/n.length;o.forEach((e=>{e.forEach((e=>{e[0]=e[0]-s,e[1]=e[1]-a}))})),console.log(o);const r=[];for(let i=0;i<l.length;i++)r.push({symbolSize:10,data:o[i],type:"scatter"});return{title:[{text:"学生做题分布情况",left:"center",textStyle:{fontSize:16}},{text:"完成率高，正确率高",z:1,textAlign:"right",left:"94%",top:"5%",textStyle:{fontSize:14,fontWeight:"normal",color:"#999"}},{text:"完成率高，正确率低",z:1,textAlign:"right",left:"94%",bottom:"8%",textStyle:{fontSize:14,fontWeight:"normal",color:"#999"}},{text:"完成率低，正确率低",z:1,textAlign:"left",left:"9%",bottom:"8%",textStyle:{fontSize:14,fontWeight:"normal",color:"#999"}},{text:"完成率低，正确率高",z:1,textAlign:"left",left:"9%",top:"5%",textStyle:{fontSize:14,fontWeight:"normal",color:"#999"}}],tooltip:{showDelay:0,formatter:e=>e.value.length>1&&`${e.seriesName}:<br/>${e.value[0].toFixed(2)}%${e.value[1].toFixed(2)}%`},xAxis:{type:"value",name:"完成率",nameLocation:"center",nameGap:25,min:-100,max:100,splitLine:{show:!1},axisLine:{symbol:["none","arrow"],symbolSize:[6,15],lineStyle:{color:"#ccc"},onZero:!0},axisLabel:{show:!0,formatter:function(e){return Math.abs(e)}},splitNumber:10},yAxis:{type:"value",name:"正确率",nameLocation:"center",nameGap:25,min:-100,max:100,splitLine:{show:!1},axisLine:{symbol:["none","arrow"],symbolSize:[6,15],lineStyle:{color:"#ccc"},onZero:!0},axisLabel:{show:!0,formatter:function(e){return Math.abs(e)}},splitNumber:10},series:r,grid:{left:"5%",right:"5%",bottom:"5%",top:"5%",containLabel:!0,show:!0,borderColor:"#ccc"}}}},data(){return{test:{},testId:null,tests:[],testClient:null,users:null}},methods:{getTests(){oe().then((e=>{this.tests=e.content,this.tests=this.tests.filter((e=>1===(0,O.W5)(e)))}))},getTest(){let e=this.id;if(!this.id){if(!this.testId)return;e=this.testId}oe(e).then((e=>{this.test=e.content[0],this.test.answerRecords=this.test.answerRecords.filter((e=>new Date(e.createTime)<new Date(this.test.endTime)));const t=(0,O.Cj)(this.test.answerRecords.map((e=>e.userId)));0!==t.length&&(tt(t).then((e=>{this.users=e})),0===(0,O.W5)(this.test)&&this.listenAnswerRecordChange())}))},averageCompletion(e){if(!this.problems)return;const t=this.problems.length,l=(0,O.on)(e.map((e=>e.problem)),"id").length;return l/t*100},averageCorrect(e){if(!this.problems)return;const t=this.problems.length,l=(0,O.on)(e.filter((e=>1===e.executeResult.id)).map((e=>e.problem)),"id").length;return l/t*100},listenAnswerRecordChange(){this.testClient=Zl.connect(`/test/${this.id}`),this.testClient.onmessage=e=>{this.getTest()}}},created(){this.getTest(),this.getTests()},unmounted(){this.testClient&&this.testClient.close()}};const Al=(0,k.Z)(Ol,[["render",Ll],["__scopeId","data-v-77a79307"]]);var Hl=Al;wl().configure({showSpinner:!1});const ql=["/login","/404","/401"],Ml=[{path:"/",name:"home",component:D,children:[{path:"",redirect:"my-test"},{path:"answer",component:Y},{path:"my-test",component:we},{path:"/my-solutions",component:Sl},{path:"/student/career",component:Ul},{path:"/teacher/student-analysis",component:Dl},{path:"/teacher/test-analysis/:id",component:Hl,props:!0},{path:"/teacher/test-analysis",component:Hl,props:!0}]},{path:"/test_result/:id",component:kl,props:!0},{path:"/problem/:id",component:rt,props:!0},{path:"/problem",component:rt,props:!0},{path:"/answer_record_detail/:id",component:_t,props:!0},{path:"/exam/:id",component:Ot,props:!0},{path:"/login",component:jt,props:!0},{path:"/404",component:pl,hidden:!0},{path:"/401",component:Xt,hidden:!0},{path:"/:catchAll(.*)",redirect:"/404",hidden:!0}],Nl=(0,o.p7)({history:(0,o.PO)(),routes:Ml});Nl.beforeEach(((e,t,l)=>{e.meta.title&&(document.title=e.meta.title+" - "+U().title),wl().start(),(0,gl.LP)()?"/login"===e.path?(l({path:"/"}),wl().done()):0===hl.Z.getters.roles.length?hl.Z.dispatch("GetInfo").then((()=>{l()})).catch((()=>{hl.Z.dispatch("LogOut").then((()=>{location.reload()}))})):l():-1!==ql.indexOf(e.path)?l():(l(`/login?redirect=${e.fullPath}`),wl().done())})),Nl.afterEach((()=>{wl().done()}));var zl=Nl},3126:function(e){e.exports={title:"HUHUOJ",tokenCookieExpires:1,passCookieExpires:1,TokenKey:"HUHUOJ-TOEKN",timeout:12e5,sidebarLogo:!0,showFooter:!0,footerTxt:'© 2023 longjiang <a href="http://www.apache.org/licenses/LICENSE-3.0" target="_blank">Apache License 3.0</a>',caseNumber:""}},5842:function(e,t,l){"use strict";l.d(t,{Z:function(){return i}});var o=l(65);const n={token:e=>e.user.token,roles:e=>e.user.roles,userRoles:e=>e.user.userRoles,user:e=>e.user.user};var s=n;const a=l(2645),r=a.keys().reduce(((e,t)=>{const l=t.replace(/^\.\/(.*)\.\w+$/,"$1"),o=a(t);return e[l]=o.default,e}),{});var i=(0,o.MT)({modules:r,getters:s})},2073:function(e,t,l){"use strict";l.r(t);var o=l(3126),n=l.n(o);const{showFooter:s,footerTxt:a,caseNumber:r}=n(),i={showSettings:!1,showFooter:s,footerTxt:a,caseNumber:r},u={CHANGE_SETTING:(e,{key:t,value:l})=>{e.hasOwnProperty(t)&&(e[t]=l)}},d={changeSetting({commit:e},t){e("CHANGE_SETTING",t)}};t["default"]={namespaced:!0,state:i,mutations:u,actions:d}},9416:function(e,t,l){"use strict";l.r(t),l.d(t,{logOut:function(){return i},setUserInfo:function(){return u}});var o=l(9895),n=l(1836),s=l(949),a=l(2325);const r={state:{token:(0,n.LP)(),user:{},roles:[],userRoles:[]},mutations:{SET_TOKEN:(e,t)=>{e.token=t},SET_USER:(e,t)=>{e.user=t},SET_ROLES:(e,t)=>{e.roles=t},SET_USER_ROLES:(e,t)=>{e.userRoles=t}},actions:{Login({commit:e},t){const l=(0,a.I8)(t);return l.password=(0,s.H)(l.password),(0,o.x4)(l).then((t=>{(0,n.o4)(t.token),e("SET_TOKEN",t.token),u(t.user,e)}))},GetInfo({commit:e}){return new Promise(((t,l)=>{(0,o.C5)().then((l=>{u(l,e),t(l)})).catch((e=>{l(e)}))}))},LogOut({commit:e}){return new Promise(((t,l)=>{(0,o.kS)().then((l=>{i(e),t()})).catch((t=>{i(e),l(t)}))}))}}},i=e=>{e("SET_TOKEN",""),e("SET_ROLES",[]),(0,n.gy)()},u=(e,t)=>{0===e.roles.length?t("SET_ROLES",["ROLE_SYSTEM_DEFAULT"]):t("SET_ROLES",e.roles),console.log(e.user.roles),0===e.user.roles.length?t("SET_USER_ROLES",["ROLE_SYSTEM_DEFAULT"]):t("SET_USER_ROLES",e.user.roles.map((e=>e.name))),t("SET_USER",e.user)};t["default"]=r},1836:function(e,t,l){"use strict";l.d(t,{LP:function(){return r},gy:function(){return u},o4:function(){return i}});var o=l(680),n=l(3126),s=l.n(n);const a=s().TokenKey;function r(){return o.Z.get(a)}function i(e){return o.Z.set(a,e,{expires:s().tokenCookieExpires})}function u(){return o.Z.remove(a)}},2325:function(e,t,l){"use strict";l.d(t,{Cj:function(){return a},Ds:function(){return n},I8:function(){return s},TD:function(){return o},W5:function(){return i},on:function(){return r}});l(7658);function o(e,t){if(0===arguments.length)return null;const l=t||"{y}-{m}-{d} {h}:{i}:{s}";let o;if("undefined"===typeof e||null===e||"null"===e)return"";"object"===typeof e?o=e:("string"===typeof e&&/^[0-9]+$/.test(e)&&(e=parseInt(e)),"number"===typeof e&&10===e.toString().length&&(e*=1e3),o=new Date(e));const n={y:o.getFullYear(),m:o.getMonth()+1,d:o.getDate(),h:o.getHours(),i:o.getMinutes(),s:o.getSeconds(),a:o.getDay()},s=l.replace(/{(y|m|d|h|i|s|a)+}/g,((e,t)=>{let l=n[t];return"a"===t?["日","一","二","三","四","五","六"][l]:(e.length>0&&l<10&&(l="0"+l),l||0)}));return s}function n(e,t,l){let o,n,s,a,r;const i=function(){const u=+new Date-a;u<t&&u>0?o=setTimeout(i,t-u):(o=null,l||(r=e.apply(s,n),o||(s=n=null)))};return function(...n){s=this,a=+new Date;const u=l&&!o;return o||(o=setTimeout(i,t)),u&&(r=e.apply(s,n),s=n=null),r}}function s(e){if(!e&&"object"!==typeof e)throw new Error("error arguments","deepClone");const t=e.constructor===Array?[]:{};return Object.keys(e).forEach((l=>{e[l]&&"object"===typeof e[l]?t[l]=s(e[l]):t[l]=e[l]})),t}function a(e){return Array.from(new Set(e))}function r(e,t){const l=new Map;return e.filter((e=>!l.has(e[t])&&l.set(e[t],1)))}function i(e){if(!e.enabled)return 1;const t=Date.parse(new Date),l=Date.parse(e.startTime),o=Date.parse(e.endTime);return t<l?-1:t>l&&t<o?0:1}},4471:function(e,t,l){"use strict";l(7658);var o=l(4161),n=l(5722),s=l(5842),a=l(6666),r=l(1836),i=l(680);const u=o.Z.create({baseURL:"/"});u.interceptors.request.use((e=>((0,r.LP)()&&(e.headers["Authorization"]=(0,r.LP)()),e.headers["Content-Type"]="application/json",e)),(e=>{Promise.reject(e)})),u.interceptors.response.use((e=>e.data),(e=>{if(console.log(e),e.response.data instanceof Blob&&-1!==e.response.data.type.toLowerCase().indexOf("json")){const t=new FileReader;t.readAsText(e.response.data,"utf-8"),t.onload=function(e){const l=JSON.parse(t.result).message;a.bM.error({title:l,duration:5e3})}}else{let l=0;try{l=e.response.data.status}catch(t){if(-1!==e.toString().indexOf("Error: timeout"))return a.bM.error({title:"网络请求超时",duration:5e3}),Promise.reject(e)}if(l)if(401===l)s.Z.dispatch("LogOut").then((()=>{i.Z.set("point",401),location.reload()}));else if(403===l)n.Z.push({path:"/401"});else{const t=e.response.data.message;void 0!==t&&a.bM.error({title:t,duration:5e3})}else a.bM.error({title:"接口请求失败",duration:5e3})}return Promise.reject(e)})),t["Z"]=u},949:function(e,t,l){"use strict";l.d(t,{H:function(){return a}});var o=l(6276),n=l.n(o);const s="MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBANL378k3RiZHWx5AfJqdH9xRNBmD9wGD\n2iRe41HdTNF8RUhNnHit5NpMNtGL0NPTSSpPjjI1kJfVorRvaQerUgkCAwEAAQ==";function a(e){const t=new(n());return t.setPublicKey(s),t.encrypt(e)}},2645:function(e,t,l){var o={"./settings.js":2073,"./user.js":9416};function n(e){var t=s(e);return l(t)}function s(e){if(!l.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}n.keys=function(){return Object.keys(o)},n.resolve=s,e.exports=n,n.id=2645}},t={};function l(o){var n=t[o];if(void 0!==n)return n.exports;var s=t[o]={exports:{}};return e[o].call(s.exports,s,s.exports,l),s.exports}l.m=e,function(){var e=[];l.O=function(t,o,n,s){if(!o){var a=1/0;for(d=0;d<e.length;d++){o=e[d][0],n=e[d][1],s=e[d][2];for(var r=!0,i=0;i<o.length;i++)(!1&s||a>=s)&&Object.keys(l.O).every((function(e){return l.O[e](o[i])}))?o.splice(i--,1):(r=!1,s<a&&(a=s));if(r){e.splice(d--,1);var u=n();void 0!==u&&(t=u)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[o,n,s]}}(),function(){l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,{a:t}),t}}(),function(){l.d=function(e,t){for(var o in t)l.o(t,o)&&!l.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){l.p="/"}(),function(){var e={143:0};l.O.j=function(t){return 0===e[t]};var t=function(t,o){var n,s,a=o[0],r=o[1],i=o[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(n in r)l.o(r,n)&&(l.m[n]=r[n]);if(i)var d=i(l)}for(t&&t(o);u<a.length;u++)s=a[u],l.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return l.O(d)},o=self["webpackChunkplatform_front"]=self["webpackChunkplatform_front"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=l.O(void 0,[998],(function(){return l(5814)}));o=l.O(o)})();
//# sourceMappingURL=app.b56c0f90.js.map